<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
</head>


<body>
    <div class="signup-container">
        <h2>Login</h2>

        <form action="/signup" method="post">

            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>

            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>

            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>

            <label for="surame">Surname:</label>
            <input type="text" id="surname" name="surname" required>

            <label for="day">Day:</label>
            <select id="day" name="day"></select>

            <label for="month">Month:</label>
            <select id="month" name="month"></select>

            <label for="year">Year:</label>
            <select id="year" name="year"></select>

            <label for="sex">Sex:</label>
            <select id="sex" name="sex">
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>

            <label for="numPets">Number of Pets:</label>
            <input type="number" id="numPets" name="numPets" min="0" step="1" required>

            <button type="submit" onclick="sendPostRequest()">SignUp</button>

            <script>
                function updateDays() {
                    var daySelect = document.getElementById('day');
                    var monthSelect = document.getElementById('month');
                    var yearSelect = document.getElementById('year');

                    var selectedMonth = monthSelect.value;
                    var selectedYear = yearSelect.value;

                    daySelect.innerHTML = '';

                    var daysInMonth = new Date(selectedYear, selectedMonth, 0).getDate();

                    for (var i = 1; i <= daysInMonth; i++) {
                        var option = document.createElement('option');
                        option.value = i;
                        option.text = i;
                        daySelect.add(option);
                    }
                }

                var months = [
                    'January', 'February', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'
                ];

                var monthSelect = document.getElementById('month');
                for (var i = 0; i < months.length; i++) {
                    var option = document.createElement('option');
                    option.value = i + 1;
                    option.text = months[i];
                    monthSelect.add(option);
                }

                var currentYear = new Date().getFullYear();
                var yearSelect = document.getElementById('year');
                for (var i = currentYear; i >= (currentYear - 100); i--) {
                    var option = document.createElement('option');
                    option.value = i;
                    option.text = i;
                    yearSelect.add(option);
                }

                updateDays();

                monthSelect.addEventListener('change', updateDays);
                yearSelect.addEventListener('change', updateDays);

                function signUp() {

                    var username = document.getElementById("username").value;
                    var password = document.getElementById("password").value;
                    var name = document.getElementById("name").value;
                    var surname = document.getElementById("surname").value;
                    var day = document.getElementById("day").value;
                    var month = document.getElementById("month").value;
                    var year = document.getElementById("year").value;
                    var sex = document.getElementById("sex").value;
                    var numPets = document.getElementById("numPets").value;

                    var signUpData = {
                        "userName": username,
                        "password": password,
                        "name": name,
                        "surName": surname,
                        "birthDate": year + "-" + month + "-" + day,
                        "sex": sex,
                        "numberOfPets": numPets
                    };
                }

                function sendPostRequest() {
                    // URL where you want to send the POST request

                    var url = "localhost:8080/signup";

                    // JSON data to be sent in the request body
                    var jsonData = {
                        "userName": "zgencer922929",
                        "password": "ashfjkhsabjk",
                        "name": "Zeynep",
                        "surName": "Gencer",
                        "birthDate": "2000-06-03",
                        "sex": "Female",
                        "numberOfPets": 3
                    };


                    // Convert JSON data to a string
                    var jsonString = JSON.stringify(jsonData);

                    // Create a new XMLHttpRequest object
                    var xhr = new XMLHttpRequest();
                    console.log("new http reuest");
                    // Configure it: POST-request, URL, asynchronous
                    xhr.open("POST", url, true);
                    console.log("open http  post reuest");

                    // Set the request header to specify that you're sending JSON data
                    xhr.setRequestHeader("Content-Type", "application/json");
                    console.log("header http reuest");



                    // Define the function to handle the response
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState === XMLHttpRequest.DONE) {
                            if (xhr.status === 200) {
                                // Request was successful, handle the response
                                console.log("Response:", xhr.responseText);
                            } else {
                                // Request failed
                                console.error("Request failed with status:", xhr.status);
                            }
                        }
                    };
                    console.log("close http reuest");

                    // Send the request with the JSON data in the body
                    xhr.send(jsonString);
                }

            </script>
        </form>
    </div>
</body>

</html>